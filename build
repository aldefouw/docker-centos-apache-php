#/bin/bash

read -p "Docker namespace (naqoda): " namespace
namespace=${namespace:-naqoda}

branch=$(git rev-parse --abbrev-ref HEAD)

read -p "Push to $branch (y/n): " pushit
pushit=${pushit:-n}

tag=$(git symbolic-ref --short HEAD)

if [[ $tag == 'master' ]]; then
	tag='latest'
fi

docker build --no-cache -t $namespace/centos-apache-php:$tag .

if [[ $pushit == 'y' ]]; then
	docker push $namespace/centos-apache-php:$tag
fi	